<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡πÄ‡∏ß‡πá‡∏ö‡∏û‡∏•‡∏∏‡∏õ‡∏µ‡πÉ‡∏´‡∏°‡πà 2025</title>
<style>
body, html {
  margin:0; padding:0;
  background: radial-gradient(circle at center, #000 0%, #111 100%);
  overflow:hidden;
  font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color:#fff;
}

/* Controls */
#controls {
  position:fixed;
  top:15px;
  left:50%;
  transform:translateX(-50%);
  z-index:10;
  background: rgba(0,0,0,0.6);
  padding:12px 24px;
  border-radius:20px;
  display:flex;
  gap:16px;
  flex-wrap:wrap;
  justify-content:center;
  box-shadow:0 4px 20px rgba(255,255,255,0.2);
}

/* Buttons */
#controls button {
  cursor:pointer;
  font-size:1em;
  padding:12px 24px;
  border:none;
  border-radius:12px;
  background:linear-gradient(135deg,#ff416c,#ff4b2b);
  color:#fff;
  font-weight:bold;
  box-shadow:0 6px 20px rgba(255,75,43,0.6);
  transition: all 0.3s ease;
  position:relative;
  overflow:hidden;
}
#controls button::after {
  content:'';
  position:absolute;
  width:100%; height:0;
  top:0; left:0;
  background: rgba(255,255,255,0.2);
  transition:0.3s;
}
#controls button:hover::after { height:100%; }
#controls button:hover {
  transform: translateY(-3px);
  box-shadow:0 8px 25px rgba(255,75,43,0.8);
  background: linear-gradient(135deg,#ff4b2b,#ff416c);
}

/* Countdown */
#countdown {
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-weight:bold;
  text-align:center;
  color:#fff;
  text-shadow: 0 0 20px #f00, 0 0 40px #ff0, 0 0 60px #fff;
  z-index:20;
  font-size:3em;
}

/* Canvas */
canvas { display:block; }

/* Media Queries */
@media(max-width:768px){
  #countdown{font-size:2em;}
  #controls{flex-direction:column;top:10px;padding:8px 16px;}
  #controls button{width:100%;font-size:0.9em;padding:10px 0;}
}
@media(max-width:480px){
  #countdown{font-size:1.5em;text-shadow:0 0 10px #f00,0 0 20px #ff0,0 0 30px #fff;}
  #controls{top:5px;padding:6px 12px;}
  #controls button{font-size:0.85em;padding:8px 0;}
}
</style>
</head>
<body>
<div id="controls">
  <button id="startBtn">üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ß‡πá‡∏ö‡∏û‡∏•‡∏∏</button>
  <button id="toggleMode">üéá ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥: ‡πÄ‡∏õ‡∏¥‡∏î</button>
  <button id="launchBtn">üéÜ ‡∏à‡∏∏‡∏î‡∏û‡∏•‡∏∏</button>
  <button id="soundBtn">üéµ ‡πÄ‡∏™‡∏µ‡∏¢‡∏á: ‡πÄ‡∏õ‡∏¥‡∏î</button>
</div>
<div id="countdown"></div>
<canvas id="canvas"></canvas>

<script>
// Canvas setup
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
let W = canvas.width = window.innerWidth;
let H = canvas.height = window.innerHeight;
function rand(min,max){return Math.random()*(max-min)+min;}

// Audio setup
let audioContext, audioEnabled = true;
function initAudio(){ 
  if(!audioContext){
    audioContext = new (window.AudioContext || window.webkitAudioContext)();
    if(audioContext.state === 'suspended') audioContext.resume();
  }
}
function playSound(url,volume=1){
  if(!audioEnabled || !audioContext) return;
  fetch(url).then(r=>r.arrayBuffer()).then(d=>audioContext.decodeAudioData(d)).then(buf=>{
    const s = audioContext.createBufferSource();
    s.buffer = buf;
    const g = audioContext.createGain();
    g.gain.value = volume;
    s.connect(g).connect(audioContext.destination);
    s.start(0);
  }).catch(e=>console.log(e));
}

// Particle
class Particle{
  constructor(x,y,angle,speed,color,life,gravity=false){
    this.x=x; this.y=y;
    this.vx=Math.cos(angle)*speed;
    this.vy=Math.sin(angle)*speed;
    this.color=color;
    this.life=life;
    this.alpha=1;
    this.gravity=gravity;
    this.prevX=x; this.prevY=y;
    this.hue=parseInt(color.match(/\d+/));
  }
  update(){
    this.prevX=this.x; this.prevY=this.y;
    this.x+=this.vx; this.y+=this.vy;
    if(this.gravity) this.vy+=0.05;
    this.life-=16;
    this.alpha=Math.max(0,this.life/1000);
    this.hue+=2;
  }
  draw(ctx){
    ctx.save();
    ctx.globalAlpha=this.alpha;
    ctx.strokeStyle=this.color; // ‡πÉ‡∏ä‡πâ‡∏™‡∏µ‡πÅ‡∏ö‡∏ö HSL ‡πÑ‡∏•‡πà‡πÄ‡∏â‡∏î
    ctx.lineWidth=2;
    ctx.beginPath();
    ctx.moveTo(this.prevX,this.prevY);
    ctx.lineTo(this.x,this.y);
    ctx.stroke();
    ctx.restore();
  }
}

// Firework
class Firework{
  constructor(x,y,targetY,color,type){
    this.x=x; this.y=y; this.targetY=targetY;
    this.color=color; this.exploded=false; this.type=type;
  }
  update(){
    this.y-=5;
    if(this.y<=this.targetY && !this.exploded){
      this.explode(); this.exploded=true;
    }
  }
  draw(ctx){ ctx.save(); ctx.fillStyle=this.color; ctx.fillRect(this.x,this.y,2,10); ctx.restore(); }
  explode(){
    // ‡πÄ‡∏™‡∏µ‡∏¢‡∏á
    playSound('https://www.soundjay.com/explosion/sounds/explosion-01.mp3', this.type==='heart'?1:0.7);

    // Particle ‡∏ï‡∏≤‡∏° type
    if(this.type==='heart') explodeHeart(this.x,this.y,this.color);
    else if(this.type==='rainbow') explodeRainbow(this.x,this.y);
    else if(this.type==='star') explodeStar(this.x,this.y,this.color);
    else explodeCircle(this.x,this.y,this.color);
  }
}

// Arrays
let fireworks=[], particles=[];
const maxParticles=800;

// Particle shapes
function explodeCircle(x,y,color){for(let i=0;i<30;i++){if(particles.length>=maxParticles) break; let a=rand(0,Math.PI*2), s=rand(1,4); particles.push(new Particle(x,y,a,s,color,rand(800,1500),true));}}
function explodeHeart(x,y,color){for(let i=0;i<100;i++){if(particles.length>=maxParticles) break; let t=rand(0,Math.PI*2); let px=16*Math.pow(Math.sin(t),3); let py=-(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t)); let hue=Math.floor(rand(0,360)); particles.push(new Particle(x+px*4,y+py*4,rand(0,6.28),rand(1,3),`hsl(${hue},100%,50%)`,rand(800,1500),true));}}
function explodeStar(x,y,color){for(let i=0;i<60;i++){if(particles.length>=maxParticles) break; let a=rand(0,Math.PI*2), r=rand(10,20); let px=Math.cos(a)*r, py=Math.sin(a)*r; let hue=Math.floor(rand(0,360)); particles.push(new Particle(x+px,y+py,rand(0,6.28),rand(1,3),`hsl(${hue},100%,50%)`,rand(800,1500),true));}}
function explodeRainbow(x,y){for(let i=0;i<120;i++){if(particles.length>=maxParticles) break; let a=rand(0,Math.PI*2), r=rand(5,30); let px=Math.cos(a)*r, py=Math.sin(a)*r; let hue=i*3; particles.push(new Particle(x+px,y+py,rand(0,6.28),rand(2,4),`hsl(${hue},100%,50%)`,rand(1000,2000),true));}}

// Launch
function launch(x=Math.random()*W,y=H){
  playSound('https://www.soundjay.com/mechanical/sounds/rocket-1.mp3',0.5);
  let typeRand=Math.random();
  let type=typeRand<0.15?'heart':(typeRand<0.3?'rainbow':(typeRand<0.6?'star':'circle'));
  fireworks.push(new Firework(x,y,rand(H/4,H/2),`hsl(${rand(0,360)},100%,50%)`,type));
}
function launchMultiple(count=3){for(let i=0;i<count;i++) launch();}

// Animate
function animate(){
  ctx.fillStyle='rgba(0,0,0,0.18)';
  ctx.fillRect(0,0,W,H);
  for(let i=fireworks.length-1;i>=0;i--){fireworks[i].update(); fireworks[i].draw(ctx); if(fireworks[i].exploded) fireworks.splice(i,1);}
  for(let i=particles.length-1;i>=0;i--){particles[i].update(); particles[i].draw(ctx); if(particles[i].life<=0) particles.splice(i,1);}
  requestAnimationFrame(animate);
}
animate();

// Controls
const startBtn=document.getElementById('startBtn');
const launchBtn=document.getElementById('launchBtn');
const toggleBtn=document.getElementById('toggleMode');
const soundBtn=document.getElementById('soundBtn');

startBtn.onclick = ()=>{
  if(!audioContext) audioContext = new (window.AudioContext || window.webkitAudioContext)();
  if(audioContext.state==='suspended') audioContext.resume();
  startBtn.style.display='none';
};

launchBtn.onclick=()=>{initAudio(); launchMultiple(rand(2,4));};
let auto=true;
toggleBtn.onclick=()=>{initAudio(); auto=!auto; toggleBtn.textContent=`üéá ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥: ${auto?"‡πÄ‡∏õ‡∏¥‡∏î":"‡∏õ‡∏¥‡∏î"}`;};
soundBtn.onclick=()=>{initAudio(); audioEnabled=!audioEnabled; soundBtn.textContent=`üéµ ‡πÄ‡∏™‡∏µ‡∏¢‡∏á: ${audioEnabled?"‡πÄ‡∏õ‡∏¥‡∏î":"‡∏õ‡∏¥‡∏î"}`;};

// Auto launch
setInterval(()=>{if(auto) launchMultiple(rand(1,3));},2200);

// Countdown
function updateCountdown(){
  let now=new Date();
  let target=new Date('Jan 1, 2026 00:00:00');
  let diff=target-now;
  if(diff<=0){document.getElementById('countdown').textContent='üéâ Happy New Year 2026! üéâ'; return;}
  let d=Math.floor(diff/86400000);
  let h=Math.floor((diff%86400000)/3600000);
  let m=Math.floor((diff%3600000)/60000);
  let s=Math.floor((diff%60000)/1000);
  document.getElementById('countdown').textContent=`${d}d ${h}h ${m}m ${s}s`;
}
setInterval(updateCountdown,1000);
updateCountdown();

// Responsive
window.addEventListener('resize',()=>{W=canvas.width=window.innerWidth; H=canvas.height=window.innerHeight;});
</script>
</body>
</html>
